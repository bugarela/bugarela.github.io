<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Personal homepage exported with org-thtml">

  <title>Revisão de programação funcional em Quint</title>
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

  <meta property="og:url" content="http://nowhere.org/mfo/20240324195706-mfo_revisao_de_programacao_funcional.html" />
  <meta property="og:title" content="Revisão de programação funcional em Quint" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="Personal homepage exported with org-thtml" />
  
  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@bugarela">
    <meta name="twitter:title" content="Revisão de programação funcional em Quint">
    <meta name="twitter:description" content="Personal homepage exported with org-thtml">
  

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.1/pure-min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.1/grids-responsive-min.css">
<link rel="stylesheet" href="../css/layouts/style.css">

  </head>
  <body>
    <div id="layout" class="pure-g">
      <div class="sidebar pure-u-1 pure-u-md-1-3">
  <div class="pure-g">
    <div class="pure-u-1 pure-u-lg-1-2">
    </div>
    <div class="pure-u-1 pure-u-lg-1-2">
      <div class="header">
        <h2 class="brand-title"><a href="../"><i class="fas fa-home"></i> Gabriela Moreira</a></h2>
      </div>
      <div class="centered">
        <h1 class="huge"><i class="fas fa-folder-open"></i></h1>
        <h1 class="huge"><a href="./">MFO</a></h1>
        <h2 class="brand-title">Métodos Formais</h2>
        <h2 class="brand-tagline">Materiais da disciplina</h2>
      </div>
      <div class="footer">
  <div>Created using Emacs and <a href="https://github.com/juanjosegarciaripoll/org-thtml">org-mode</a></div>
</div>

    </div>
  </div>
</div>

      <div class="content pure-u-1 pure-u-md-2-3">
        <h2>Revisão de programação funcional em Quint</h2>
        <a href="https://bugarela.com/mfo/slides/20240324195706-mfo_revisao_de_programacao_funcional.pdf">Slides</a><br />
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org8b44714">1. Introdução</a>
<ul>
<li><a href="#org38fe9cc">1.1. Instalando as ferramentas - Dependências</a></li>
<li><a href="#orga8a761a">1.2. Quint</a></li>
<li><a href="#orgb682e92">1.3. TLC</a></li>
<li><a href="#org94bfcd5">1.4. Apalache</a></li>
<li><a href="#orgb8a1421">1.5. Restrições de Quint e TLA+</a></li>
<li><a href="#orgce8958a">1.6. Forma dos operadores em Quint</a></li>
</ul>
</li>
<li><a href="#orgba7048f">2. Conjuntos!</a>
<ul>
<li><a href="#orgfad02fd">2.1. Conjuntos!</a></li>
<li><a href="#orgce28769">2.2. <code>map</code>, seu novo melhor amigo</a></li>
<li><a href="#org963868b">2.3. <code>map</code> com operadores de múltiplos argumentos</a></li>
<li><a href="#org3eda57c">2.4. <code>map</code> com operadores que esperam uma dupla</a></li>
<li><a href="#org179e16a">2.5. <code>map</code> não resolve tudo!</a></li>
<li><a href="#org067980e">2.6. <code>filter</code> permite filtrar o conjunto</a></li>
<li><a href="#org475ee51">2.7. <code>fold</code> permite acumular um valor ao percorrer o conjunto</a></li>
<li><a href="#org3e3f8dc">2.8. Exercício: <code>map</code> e <code>filter</code> com <code>fold</code></a></li>
<li><a href="#org93d68b4">2.9. Operações de conjuntos</a></li>
<li><a href="#org298bf01">2.10. Operadores booleanos para conjuntos</a></li>
<li><a href="#org166a5de">2.11. Powerset - Conjunto das partes</a></li>
<li><a href="#org1c75085">2.12. <code>flatten</code>, para conjuntos de conjuntos</a></li>
</ul>
</li>
<li><a href="#orgd60cb03">3. <code>Maps</code></a>
<ul>
<li><a href="#org8a6e469">3.1. Maps</a></li>
<li><a href="#org4bc4e98">3.2. Chaves e valores</a></li>
<li><a href="#org8a5f09b">3.3. Acessando e atualizando</a></li>
<li><a href="#orgd859ef5">3.4. Atualizando com <code>setBy</code></a></li>
<li><a href="#orgaa18e35">3.5. Criando todos os <code>Maps</code> possíveis</a></li>
</ul>
</li>
<li><a href="#org58d75ff">4. Tuplas</a>
<ul>
<li><a href="#org5fff834">4.1. Tuplas</a></li>
<li><a href="#org5526071">4.2. Acessando itens</a></li>
<li><a href="#org6f99b4a">4.3. Criando todas as tuplas possíveis</a></li>
</ul>
</li>
<li><a href="#org53d16c7">5. <code>Records</code></a>
<ul>
<li><a href="#orgc156228">5.1. <code>Records</code></a></li>
<li><a href="#org8aa1357">5.2. Acessando e atualizando</a></li>
</ul>
</li>
<li><a href="#orgb76977e">6. Listas</a>
<ul>
<li><a href="#org1a63e68">6.1. Listas</a></li>
<li><a href="#orge2671ed">6.2. Acessando</a></li>
<li><a href="#org5ae7be8">6.3. Atualizando</a></li>
<li><a href="#org84b9549">6.4. Filtrando listas</a></li>
<li><a href="#org6491501">6.5. <code>foldl</code> e <code>foldr</code></a></li>
<li><a href="#org0cd42cd">6.6. Use <code>indices</code> para fazer um <code>map</code></a></li>
</ul>
</li>
<li><a href="#orgf4fb581">7. Tipos</a>
<ul>
<li><a href="#org811ae5f">7.1. Definindo tipos (<i>aliases</i>)</a></li>
<li><a href="#org05f311a">7.2. Tipos soma</a></li>
<li><a href="#org1b9ba9c">7.3. Recursos</a></li>
<li><a href="#org12898f0">7.4. Exercícios</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org8b44714" class="outline-2">
<h2 id="org8b44714"><span class="section-number-2">1.</span> Introdução</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org38fe9cc" class="outline-3">
<h3 id="org38fe9cc"><span class="section-number-3">1.1.</span> Instalando as ferramentas - Dependências</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li><a href="https://nodejs.org/en/download">NodeJS &gt;= 18</a><br /></li>
<li><a href="https://adoptium.net">Java Development Kit &gt;= 17</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-orga8a761a" class="outline-3">
<h3 id="orga8a761a"><span class="section-number-3">1.2.</span> Quint</h3>
<div class="outline-text-3" id="text-1-2">
<ol class="org-ol">
<li>Com acesso de administrador<br />
<ul class="org-ul">
<li>Instalar: <code>npm i @informalsystems/quint -g</code><br /></li>
<li>Executar: <code>quint --help</code><br /></li>
</ul></li>

<li>Sem acesso de administrador<br />
<ul class="org-ul">
<li>Instalar: <code>npm i @informalsystems/quint --user</code><br /></li>
<li>Executar: <code>npx quint --help</code><br /></li>
<li>Essa instalação é local, então você vai precisar instalar de novo se trocar de pasta<br /></li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-orgb682e92" class="outline-3">
<h3 id="orgb682e92"><span class="section-number-3">1.3.</span> TLC</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li><a href="https://lamport.azurewebsites.net/tla/standalone-tools.html">TLC para linha de comando</a><br />
<ul class="org-ul">
<li>Opcional, se quiser usar pela linha de comando<br /></li>
</ul></li>
<li>Extensão no VSCode<br />
<ul class="org-ul">
<li>Após instalar, abra um arquivo <code>.tla</code>, aperte F1 e procure o comando &ldquo;TLA+: Check model with TLC&rdquo;<br /></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org94bfcd5" class="outline-3">
<h3 id="org94bfcd5"><span class="section-number-3">1.4.</span> Apalache</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li><a href="https://github.com/informalsystems/apalache/releases">Apalache para linha de comando</a><br /></li>
<li>É usado internamente pelo Quint quando invocamos <code>quint verify</code>. Só precisa baixar separadamente se quiser utilizar com TLA+.<br /></li>
<li>Usuários de <b>Windows</b>: Baixar a versão disponível no moodle, que inclui um <code>.bat</code><br />
<ul class="org-ul">
<li>Também precisam executar o servidor do Apalache manualmente: <code>.\apalache-mc.bat server</code><br /></li>
<li>Se não fizerem isso, <code>quint verify</code> não vai funcionar<br /></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgb8a1421" class="outline-3">
<h3 id="orgb8a1421"><span class="section-number-3">1.5.</span> Restrições de Quint e TLA+</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>Não há recursão*<br />
<ul class="org-ul">
<li>*Existe recursão em TLA+, mas foi adicionado posteriormente. Não suportado pelo Apalache.<br /></li>
</ul></li>
<li>Não há laços de repetição (<code>for</code>, <code>while</code>)<br /></li>
<li>Não há manipulação de <code>string</code><br /></li>
</ul>
</div>
</div>
<div id="outline-container-orgce8958a" class="outline-3">
<h3 id="orgce8958a"><span class="section-number-3">1.6.</span> Forma dos operadores em Quint</h3>
<div class="outline-text-3" id="text-1-6">
<p>
Todos os operadores (exceto os com símbolos, como <code>+</code>) podem ser aplicados de duas formas em Quint:<br />
</p>
<ol class="org-ol">
<li><code>operador(arg0, ..., argn)</code><br /></li>
<li><code>arg0.operador(arg1, ..., argn)</code><br /></li>
</ol>

<p>
Escolha a forma que você acha mais fácil de ler!<br />
</p>
</div>
</div>
</div>
<div id="outline-container-orgba7048f" class="outline-2">
<h2 id="orgba7048f"><span class="section-number-2">2.</span> Conjuntos!</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgfad02fd" class="outline-3">
<h3 id="orgfad02fd"><span class="section-number-3">2.1.</span> Conjuntos!</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Conjuntos, ou <i>Sets</i>, são a principal estrutura de dados em Quint em TLA+.<br />
</p>
<ul class="org-ul">
<li>A não ser que a <b>ordem</b> dos elementos seja realmente importante, use conjuntos em vez de listas.<br /></li>
<li>Importante! Isso é um ponto que vou avaliar no trabalho de vocês.<br /></li>
</ul>

<p>
O tipo de um conjunto é dado por <code>Set[&lt;elemento&gt;]</code>. Ou seja, um conjunto de inteiros tem tipo <code>Set[int]</code>.<br />
</p>

<p>
Criando conjuntos:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #d79921;">Set</span>(1, 2, 3) <span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(1, 2, 3)</span>
1.to(3) <span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(1, 2, 3)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgce28769" class="outline-3">
<h3 id="orgce28769"><span class="section-number-3">2.2.</span> <code>map</code>, seu novo melhor amigo</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Em linguagens funcionais, usamos muito a função <code>map</code>, que permite a aplicação deu uma função a cada elemento de um conjunto.<br />
</p>

<div class="org-src-container">
<pre class="src src-quint"><span style="color: #d79921;">Set</span>(1, 2, 3).map(x =&gt; x * 2) <span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(2, 4, 6)</span>
</pre>
</div>

<p>
Pode ser usado com lambdas (operadores anônimos), como acima, ou com operadores nomeados:<br />
</p>

<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">pure</span> <span style="color: #e35b15;">def</span> quadrado(x: <span style="color: #d79921;">int</span>): <span style="color: #d79921;">int</span> = x * x

<span style="color: #d79921;">Set</span>(1, 2, 3).map(quadrado) <span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(1, 4, 9)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org963868b" class="outline-3">
<h3 id="org963868b"><span class="section-number-3">2.3.</span> <code>map</code> com operadores de múltiplos argumentos</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Dado um conjunto de duplas, podemos aplicar um operador em cada uma das duplas. Mas cuidado! Se o operador espera dois argumentos, temos que fazer o <code>unpacking</code> das duplas, utilizando parênteses duplos.<br />
</p>

<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">pure</span> <span style="color: #e35b15;">def</span> soma(x: <span style="color: #d79921;">int</span>, y: <span style="color: #d79921;">int</span>): <span style="color: #d79921;">int</span> = x + y

<span style="color: #d79921;">Set</span>((1, 1), (2, 3)).map(soma)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">static analysis error: error: [QNT000] Expected 1 arguments, got 2</span>

<span style="color: #d79921;">Set</span>((1, 1), (2, 3)).map(((a, b)) =&gt; soma(a, b))
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(2, 5)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org3eda57c" class="outline-3">
<h3 id="org3eda57c"><span class="section-number-3">2.4.</span> <code>map</code> com operadores que esperam uma dupla</h3>
<div class="outline-text-3" id="text-2-4">
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">pure</span> <span style="color: #e35b15;">def</span> somaDupla(t: (<span style="color: #d79921;">int</span>, <span style="color: #d79921;">int</span>)): <span style="color: #d79921;">int</span> = t._1 + t._2

<span style="color: #d79921;">Set</span>((1, 1), (2, 3)).map(somaDupla)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(2, 5)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org179e16a" class="outline-3">
<h3 id="org179e16a"><span class="section-number-3">2.5.</span> <code>map</code> não resolve tudo!</h3>
<div class="outline-text-3" id="text-2-5">
<p>
O <code>map</code> só nos ajuda quando queremos um conjunto como retorno.<br />
</p>
<ul class="org-ul">
<li>Dado um conjunto de números, retorne um conjunto do quadrado desses números.<br /></li>
<li>Dado um conjunto de pessoas, retorne um conjunto com as idades das pessoas.<br /></li>
</ul>

<p>
<code>map</code> não pode ser usado para as seguintes operações:<br />
</p>
<ul class="org-ul">
<li>Dado um conjunto de números, retorne a soma de todos esses números.<br /></li>
<li>Dado um conjunto de números, retorne um conjunto apenas com os números pares.<br /></li>
</ul>

<p>
Lembram quais funções podem ajudar com esses casos?<br />
</p>
</div>
</div>
<div id="outline-container-org067980e" class="outline-3">
<h3 id="org067980e"><span class="section-number-3">2.6.</span> <code>filter</code> permite filtrar o conjunto</h3>
<div class="outline-text-3" id="text-2-6">
<p>
Exemplo: Dado um conjunto de números, retorne um conjunto apenas com os números pares.<br />
</p>

<div class="org-src-container">
<pre class="src src-quint"><span style="color: #d79921;">Set</span>(1, 2, 3, 4).filter(x =&gt; x % 2 == 0)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(2, 4)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org475ee51" class="outline-3">
<h3 id="org475ee51"><span class="section-number-3">2.7.</span> <code>fold</code> permite acumular um valor ao percorrer o conjunto</h3>
<div class="outline-text-3" id="text-2-7">
<p>
Argumentos do <code>fold</code><br />
</p>
<ol class="org-ol">
<li>O conjunto sobre o qual iterar<br /></li>
<li>Um valor inicial para o acumulador<br /></li>
<li>Um operador que recebe dois argumentos (o acumulador, e o elemento iterado), e retorna o novo valor para o acumulador<br /></li>
</ol>

<p>
Exemplo: Dado um conjunto de números, retorne a soma de todos esses números.<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #d79921;">Set</span>(1, 2, 3, 4).fold(0, (acc, i) =&gt; acc + i)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">10</span>
</pre>
</div>
<p>
<b>Atenção</b>: Não assumir nada sobre a ordem em que os elementos são iterados.<br />
</p>
</div>
</div>
<div id="outline-container-org3e3f8dc" class="outline-3">
<h3 id="org3e3f8dc"><span class="section-number-3">2.8.</span> Exercício: <code>map</code> e <code>filter</code> com <code>fold</code></h3>
<div class="outline-text-3" id="text-2-8">
<p>
Exercício: Re-escreva nossos exemplos anteriores usando <code>fold</code> ao invés de <code>map</code> e <code>filter</code>:<br />
</p>
<ol class="org-ol">
<li>Dado um conjunto de números, retorne um conjunto do quadrado desses números.<br /></li>
<li>Dado um conjunto de números, retorne um conjunto apenas com os números pares.<br /></li>
</ol>
</div>
</div>
<div id="outline-container-org93d68b4" class="outline-3">
<h3 id="org93d68b4"><span class="section-number-3">2.9.</span> Operações de conjuntos</h3>
<div class="outline-text-3" id="text-2-9">
<ol class="org-ol">
<li>União: <code>union</code><br /></li>
<li>Intersecção: <code>intersect</code><br /></li>
<li>Diferença: <code>exclude</code><br /></li>
</ol>
</div>
</div>
<div id="outline-container-org298bf01" class="outline-3">
<h3 id="org298bf01"><span class="section-number-3">2.10.</span> Operadores booleanos para conjuntos</h3>
<div class="outline-text-3" id="text-2-10">
<ol class="org-ol">
<li>Pertence, \(\in\): <code>in</code>, <code>contains</code><br />
<code>e.in(S)</code> é equivalente a <code>S.contains(e)</code><br /></li>
<li>Contido, \(\subseteq\): <code>subseteq</code><br /></li>
<li>Para todo, \(\forall\): <code>forall</code><br /></li>
<li>Existe, \(\exists\): <code>exists</code><br /></li>
</ol>
</div>
</div>
<div id="outline-container-org166a5de" class="outline-3">
<h3 id="org166a5de"><span class="section-number-3">2.11.</span> Powerset - Conjunto das partes</h3>
<div class="outline-text-3" id="text-2-11">
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #d79921;">Set</span>(1, 2).powerset()
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(Set(), Set(1), Set(2), Set(1, 2))</span>
</pre>
</div>

<p>
Útil quando queremos gerar várias possibilidades para escolher dentre elas.<br />
</p>
</div>
</div>
<div id="outline-container-org1c75085" class="outline-3">
<h3 id="org1c75085"><span class="section-number-3">2.12.</span> <code>flatten</code>, para conjuntos de conjuntos</h3>
<div class="outline-text-3" id="text-2-12">
<p>
Um conjunto de conjuntos de elementos to tipo <code>t</code> pode ser convertido em um conjunto de elementos do tipo <code>t</code> com o operador <code>flatten</code>.<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #d79921;">Set</span>(<span style="color: #d79921;">Set</span>(1, 2), <span style="color: #d79921;">Set</span>(1, 3)).flatten()
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(1, 2, 3)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd60cb03" class="outline-2">
<h2 id="orgd60cb03"><span class="section-number-2">3.</span> <code>Maps</code></h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org8a6e469" class="outline-3">
<h3 id="org8a6e469"><span class="section-number-3">3.1.</span> Maps</h3>
<div class="outline-text-3" id="text-3-1">
<p>
<code>Map</code> é a estrutura de dicionário em Quint. Em TLA+, essa mesma estrutura tem nome de função.<br />
</p>

<p>
O tipo de um mapa é dado por <code>&lt;chave&gt; -&gt; &lt;valor&gt;</code>. Ou seja, um mapa de inteiros para strings tem tipo <code>int -&gt; str</code>.<br />
</p>

<p>
Criando <code>Maps</code>:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint">Map(1 -&gt; <span style="color: #98971a;">"a"</span>, 2 -&gt; <span style="color: #98971a;">"b"</span>)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Map(1 -&gt; "a", 2 -&gt; "b")</span>

<span style="color: #d79921;">Set</span>((1, <span style="color: #98971a;">"a"</span>), (2, <span style="color: #98971a;">"b"</span>)).setToMap()
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Map(1 -&gt; "a", 2 -&gt; "b")</span>

<span style="color: #d79921;">Set</span>(1, 2).mapBy(x =&gt; <span style="color: #66a4a4;">if</span> (x &lt; 2) <span style="color: #98971a;">"a"</span> <span style="color: #66a4a4;">else</span> <span style="color: #98971a;">"b"</span>)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Map(1 -&gt; "a", 2 -&gt; "b")</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org4bc4e98" class="outline-3">
<h3 id="org4bc4e98"><span class="section-number-3">3.2.</span> Chaves e valores</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Para obter todas as chaves:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint">Map(1 -&gt; <span style="color: #98971a;">"a"</span>, 2 -&gt; <span style="color: #98971a;">"b"</span>).keys()
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(1, 2)</span>
</pre>
</div>

<p>
E os valores?<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">val</span> m = Map(1 -&gt; <span style="color: #98971a;">"a"</span>, 2 -&gt; <span style="color: #98971a;">"b"</span>)
m.keys().map(k =&gt; m.get(k))
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set("a", "b")</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org8a5f09b" class="outline-3">
<h3 id="org8a5f09b"><span class="section-number-3">3.3.</span> Acessando e atualizando</h3>
<div class="outline-text-3" id="text-3-3">
<p>
<code>set</code> atualiza um elemento existente, e <code>put</code> pode criar um novo par chave-valor.<br />
</p>

<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">val</span> m = Map(1 -&gt; <span style="color: #98971a;">"a"</span>, 2 -&gt; <span style="color: #98971a;">"b"</span>)

m.get(1)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">"a"</span>

m.set(1, <span style="color: #98971a;">"c"</span>)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Map(1 -&gt; "c", 2 -&gt; "b")</span>

m.set(3, <span style="color: #98971a;">"c"</span>)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">runtime error: error: [QNT507] Called 'set' with a non-existing key</span>

m.put(3, <span style="color: #98971a;">"c"</span>)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Map(1 -&gt; "a", 2 -&gt; "b", 3 -&gt; "c")</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd859ef5" class="outline-3">
<h3 id="orgd859ef5"><span class="section-number-3">3.4.</span> Atualizando com <code>setBy</code></h3>
<div class="outline-text-3" id="text-3-4">
<p>
<code>setBy</code> é uma utilidade para quando queremos fazer uma operação sobre um valor existente no mapa.<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">val</span> m = Map(<span style="color: #98971a;">"a"</span> -&gt; 1, <span style="color: #98971a;">"b"</span> -&gt; 2)

m.set(<span style="color: #98971a;">"a"</span>, m.get(<span style="color: #98971a;">"a"</span>) + 1)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Map("a" -&gt; 2, "b" -&gt; 2)</span>

m.setBy(<span style="color: #98971a;">"a"</span>, x =&gt; x + 1)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Map("a" -&gt; 2, "b" -&gt; 2)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgaa18e35" class="outline-3">
<h3 id="orgaa18e35"><span class="section-number-3">3.5.</span> Criando todos os <code>Maps</code> possíveis</h3>
<div class="outline-text-3" id="text-3-5">
<p>
Para criar todos os <code>Maps</code> possíveis dado um domínio e um co-domínio, podemos usar o <code>setOfMaps</code>:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #d79921;">Set</span>(1, 2).setOfMaps(<span style="color: #d79921;">Set</span>(<span style="color: #98971a;">"a"</span>, <span style="color: #98971a;">"b"</span>))
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(Map(1 -&gt; "a", 2 -&gt; "a"), Map(1 -&gt; "b", 2 -&gt; "a"),</span>
<span style="color: #C18E76;">//     </span><span style="color: #C18E76;">Map(1 -&gt; "a", 2 -&gt; "b"), Map(1 -&gt; "b", 2 -&gt; "b"))</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org58d75ff" class="outline-2">
<h2 id="org58d75ff"><span class="section-number-2">4.</span> Tuplas</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org5fff834" class="outline-3">
<h3 id="org5fff834"><span class="section-number-3">4.1.</span> Tuplas</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Tuplas são combinações de tipos diferentes em um mesmo valor, onde a ordem dos elementos é o que define o tipo esperado.<br />
</p>

<p>
O tipo de uma tupla é dado por <code>(t0, ..., tn)</code>. Uma tupla com tipo <code>(int, str, bool)</code> permite valores como <code>(1, "a", true)</code>.<br />
</p>

<p>
Existe um único jeito de criar uma tupla:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint">(1, <span style="color: #98971a;">"a"</span>, <span style="color: #805b87;">true</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org5526071" class="outline-3">
<h3 id="org5526071"><span class="section-number-3">4.2.</span> Acessando itens</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Itens de tuplas são acessados com <code>._1</code>, <code>._2</code>, <code>._3</code>, &#x2026;<br />
</p>
<p>
Não existe <code>._0</code>, a contagem inicia do 1.<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">val</span> t = (1, <span style="color: #98971a;">"a"</span>, <span style="color: #805b87;">true</span>)

t._1
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">1</span>

t._3
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">true</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6f99b4a" class="outline-3">
<h3 id="org6f99b4a"><span class="section-number-3">4.3.</span> Criando todas as tuplas possíveis</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Para criar um conjunto com todas as tuplas possíveis com elementos em dados conjuntos, usamos o <code>tuples</code>:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint">tuples(<span style="color: #d79921;">Set</span>(1, 2), <span style="color: #d79921;">Set</span>(<span style="color: #98971a;">"a"</span>, <span style="color: #98971a;">"b"</span>))
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set((1, "a"), (2, "a"), (1, "b"), (2, "b"))</span>

tuples(<span style="color: #d79921;">Set</span>(1), <span style="color: #d79921;">Set</span>(<span style="color: #98971a;">"a"</span>, <span style="color: #98971a;">"b"</span>), <span style="color: #d79921;">Set</span>(<span style="color: #805b87;">false</span>))
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set((1, "a", false), (1, "b", false))</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org53d16c7" class="outline-2">
<h2 id="org53d16c7"><span class="section-number-2">5.</span> <code>Records</code></h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgc156228" class="outline-3">
<h3 id="orgc156228"><span class="section-number-3">5.1.</span> <code>Records</code></h3>
<div class="outline-text-3" id="text-5-1">
<p>
<code>Records</code> são combinações de tipos diferentes em um mesmo valor, onde os elementos são nomeados.<br />
</p>

<p>
O tipo de um <i>record</i> é dado por <code>{ field0: t0, ..., fieldn: tn }</code>. Um <i>record</i> com tipo <code>{ nome: str, idade: int }</code> permite valores como <code>{ nome: "Gabriela", idade: 25 }</code>.<br />
</p>
</div>
</div>
<div id="outline-container-org8aa1357" class="outline-3">
<h3 id="org8aa1357"><span class="section-number-3">5.2.</span> Acessando e atualizando</h3>
<div class="outline-text-3" id="text-5-2">
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">val</span> r = { nome: <span style="color: #98971a;">"Gabriela"</span>, idade: 25 }

r.nome
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">"Gabriela"</span>

r.with(idade, 26)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">{ nome: "Gabriela", idade: 26 }</span>

{ ...r, idade: 26 }
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">{ nome: "Gabriela", idade: 26 }</span>

r
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">{ nome: "Gabriela", idade: 25 }</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb76977e" class="outline-2">
<h2 id="orgb76977e"><span class="section-number-2">6.</span> Listas</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org1a63e68" class="outline-3">
<h3 id="org1a63e68"><span class="section-number-3">6.1.</span> Listas</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Listas são como conjuntos, porém com uma ordem definida e, possivelmente, com elementos repetidos. Em TLA+, essa mesma estrutura tem nome de sequência.<br />
</p>

<p>
O tipo de uma lista é dado por <code>List[&lt;elemento&gt;]</code>. Ou seja, uma lista de inteiros tem tipo <code>List[int]</code>.<br />
</p>

<p>
Criando listas:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint">[1, 2, 3]
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[1, 2, 3]</span>

<span style="color: #d79921;">List</span>(1, 2, 3)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[1, 2, 3]</span>

range(1, 4)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[1, 2, 3]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orge2671ed" class="outline-3">
<h3 id="orge2671ed"><span class="section-number-3">6.2.</span> Acessando</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">val</span> l = [1, 2, 3]

l[1]
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">2</span>

l.head()
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">1</span>

l.tail()
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[2, 3]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org5ae7be8" class="outline-3">
<h3 id="org5ae7be8"><span class="section-number-3">6.3.</span> Atualizando</h3>
<div class="outline-text-3" id="text-6-3">
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">val</span> l = [1, 2, 3]

l.replaceAt(0, 5)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[5, 2, 3]</span>

l.concat([4, 5])
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[1, 2, 3, 4, 5]</span>

l.append(4)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[1, 2, 3, 4]</span>

l
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[1, 2, 3]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org84b9549" class="outline-3">
<h3 id="org84b9549"><span class="section-number-3">6.4.</span> Filtrando listas</h3>
<div class="outline-text-3" id="text-6-4">
<p>
<code>slice</code> retorna uma nova lista com um intervalo de elementos da lista original.<br />
</p>
<div class="org-src-container">
<pre class="src src-quint">[1, 2, 3].slice(0, 1)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[1]</span>
</pre>
</div>

<p>
<code>select</code> é semelhante ao <code>filter</code> (de conjuntos).<br />
</p>
<div class="org-src-container">
<pre class="src src-quint">[1, 2, 3, 4, 5].select(x =&gt; x &gt; 3)
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[4, 5]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6491501" class="outline-3">
<h3 id="org6491501"><span class="section-number-3">6.5.</span> <code>foldl</code> e <code>foldr</code></h3>
<div class="outline-text-3" id="text-6-5">
<p>
Diferente do <code>fold</code> pra conjuntos, a operação de <i>fold</i> sobre listas respeita uma ordem específica. <code>foldl</code> (<i>fold left</i>) vai iterar da esquerda pra direita, enquanto <code>foldl</code> (<i>fold right</i>) vai iterar da direita pra esquerda.<br />
</p>
<p>
Atenção também para a ordem dos argumentos do operador dado como último argumento.<br />
</p>
<div class="org-src-container">
<pre class="src src-quint">[1, 2, 3].foldl([], (acc, i) =&gt; acc.append(i))
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[1, 2, 3]</span>

[1, 2, 3].foldr([], (i, acc) =&gt; acc.append(i))
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">[3, 2, 1]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0cd42cd" class="outline-3">
<h3 id="org0cd42cd"><span class="section-number-3">6.6.</span> Use <code>indices</code> para fazer um <code>map</code></h3>
<div class="outline-text-3" id="text-6-6">
<p>
O operador <code>map</code> não funciona pra listas. Conseguimos reproduzir essa funcionalidade usando o operador <code>indices</code>, que returna o índices de uma lista (isso é, \(0\) até \(length(l) - 1\)).<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">val</span> l = [1, 2, 3]
<span style="color: #e35b15;">def</span> f(x) = x + 1

l.indices().map(i =&gt; f(l[i]))
<span style="color: #C18E76;">// </span><span style="color: #C18E76;">Set(2, 3, 4)</span>
</pre>
</div>

<p>
Perceba que o resultado aqui é um conjunto. Para que o resultado seja uma lista, temos que usar <code>foldl</code> ou <code>foldr</code>.<br />
</p>
</div>
</div>
</div>
<div id="outline-container-orgf4fb581" class="outline-2">
<h2 id="orgf4fb581"><span class="section-number-2">7.</span> Tipos</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org811ae5f" class="outline-3">
<h3 id="org811ae5f"><span class="section-number-3">7.1.</span> Definindo tipos (<i>aliases</i>)</h3>
<div class="outline-text-3" id="text-7-1">
<p>
Nomes de tipos devem sempre iniciar com letra maiúscula.<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">type</span> Idade = <span style="color: #d79921;">int</span>

<span style="color: #e35b15;">val</span> a: Idade = 1
</pre>
</div>
</div>
</div>
<div id="outline-container-org05f311a" class="outline-3">
<h3 id="org05f311a"><span class="section-number-3">7.2.</span> Tipos soma</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">
<pre class="src src-quint"><span style="color: #e35b15;">type</span> Periodo = Manha | Tarde | Noite

<span style="color: #e35b15;">type</span> EstadoLogin = Logado(<span style="color: #d79921;">str</span>) | Deslogado

<span style="color: #e35b15;">type</span> Opcional[a] = Algum(a) | Nenhum
</pre>
</div>
</div>
</div>
<div id="outline-container-org1b9ba9c" class="outline-3">
<h3 id="org1b9ba9c"><span class="section-number-3">7.3.</span> Recursos</h3>
<div class="outline-text-3" id="text-7-3">
<ul class="org-ul">
<li><a href="https://github.com/informalsystems/quint/blob/main/doc/quint-cheatsheet.pdf">Cheatsheet Quint</a><br /></li>
<li>Documentação dos builtins<br />
<ul class="org-ul">
<li><a href="https://github.com/informalsystems/quint/blob/main/quint/src/builtin.qnt">em Quint</a><br /></li>
<li><a href="https://github.com/informalsystems/quint/blob/main/doc/builtin.md">em Markdown</a><br /></li>
</ul></li>
<li><a href="https://github.com/informalsystems/quint/tree/main/examples/spells">Spells</a> - bibliotecas auxiliares<br />
<ul class="org-ul">
<li>PS: Quer contribuir pra opensource? Esse é um ótimo local pra começar<br /></li>
</ul></li>
<li><a href="https://github.com/informalsystems/quint/blob/main/doc/lang.md">Manual do Quint</a><br /></li>
</ul>
</div>
</div>
<div id="outline-container-org12898f0" class="outline-3">
<h3 id="org12898f0"><span class="section-number-3">7.4.</span> Exercícios</h3>
<div class="outline-text-3" id="text-7-4">
<ol class="org-ol">
<li>Escreva um operador que recebe um conjunto e retorna a média dos valores.<br /></li>
<li>Dado um conjunto de <code>records</code> do tipo <code>{ nome: str, idade: int }</code>, escreva um operador que recebe esse conjunto e retorna a diferença de idade entre o mais velho e o mais novo.<br /></li>
<li>Defina um valor que contenha todos os conjuntos possíveis com valores inteiros de 1 a 10, com tamanho maior que 2 e menor que 5.<br /></li>
<li>Escreva um operador que calcule o fatorial de um número. Lembre-se que recursão não é permitida.<br /></li>
<li>Escreva um operador que recebe uma lista e retorna um mapa onde as chaves são os elementos da lista, e os valores são inteiros representando a quantidade de ocorrências daquele elemento na lista.<br /></li>
</ol>
</div>
</div>
</div>

      </div>
    </div>
  </body>
</html>
