<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Personal homepage exported with org-thtml">

  <title>Testando um problema da maratona</title>
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

  <meta property="og:url" content="https://bugarela.com/mfo/20240520131408-mfo_testando_um_problema_da_maratona.html" />
  <meta property="og:title" content="Testando um problema da maratona" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="Personal homepage exported with org-thtml" />
  
    <meta property="og:image" content="https://bugarela.com/mfo/figures/problema-maratona-D.png" />
    <meta property="og:image:width" content="3200" />
    <meta property="og:image:height" content="1515" />
  
  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@bugarela">
    <meta name="twitter:title" content="Testando um problema da maratona">
    <meta name="twitter:description" content="Personal homepage exported with org-thtml">
  

<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.1/pure-min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.1/grids-responsive-min.css">
<link rel="stylesheet" href="../css/layouts/style.css">

    </head>
    <body>
        <div id="layout" class="pure-g">
            <div class="sidebar pure-u-1 pure-u-md-1-5" style="text-align: center">
    <div class="header">
        <h2 class="brand-title">
            <a href="../"><i class="fas fa-home"></i> Gabriela Moreira</a>
        </h2>
    </div>
    <div class="centered">
        <h1 class="huge"><i class="fas fa-folder-open"></i></h1>
        <h1 class="huge"><a href="./">MFO</a></h1>
        <h2 class="brand-title">Métodos Formais</h2>
        <h2 class="brand-tagline">Materiais da disciplina</h2>
    </div>
    <div class="footer">
    <div>
        Created using Emacs and
        <a href="https://github.com/juanjosegarciaripoll/org-thtml">org-mode</a
        >.<br />
        Style from
        <a href="https://owickstrom.github.io/the-monospace-web/"
            >The Monospace Web</a
        >.
    </div>
</div>

</div>

            <div class="content pure-u-1 pure-u-md-2-3">
                
                <h1>Testando um problema da maratona</h1>
                 <a href="https://bugarela.com/mfo/slides/20240520131408-mfo_testando_um_problema_da_maratona.pdf">Slides</a><br />
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#aaatestes-1">1. AAATestes</a>
<ul>
<li><a href="#problema-d-desvio-de-rota-2">1.1. Problema D: Desvio de rota</a></li>
<li><a href="#testes-comuns-2">1.2. Testes comuns</a></li>
<li><a href="#testes-baseados-em-propriedades-2">1.3. Testes baseados em propriedades</a></li>
<li><a href="#testes-baseados-em-modelos-2">1.4. Testes baseados em modelos</a></li>
<li><a href="#extra-o-de-c-digo-2">1.5. Extração de código</a></li>
<li><a href="#trabalho-2-2">1.6. Trabalho 2</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-aaatestes-1" class="outline-2">
<h2 id="aaatestes-1"><span class="section-number-2">1.</span> AAATestes</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-problema-d-desvio-de-rota-2" class="outline-3">
<h3 id="problema-d-desvio-de-rota-2"><span class="section-number-3">1.1.</span> Problema D: Desvio de rota</h3>
<div class="outline-text-3" id="text-1-1">

<div class="figure">
<p><img src="./figures/problema-maratona-D.png" alt="problema-maratona-D.png" /><br />
</p>
</div>
</div>
</div>
<div id="outline-container-testes-comuns-2" class="outline-3">
<h3 id="testes-comuns-2"><span class="section-number-3">1.2.</span> Testes comuns</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>Vão testar um caso específico<br /></li>
<li>Podem ser unitários, de integração, etc<br />
<ul class="org-ul">
<li>Existem varias classificações e debates sobre as definições precisas.<br /></li>
</ul></li>
</ul>

<ul class="org-ul">
<li>Exemplos de entrada e saída fornecidos na prova<br /></li>
<li>Exemplos específicos que os times bolam durante a prova<br /></li>
</ul>
</div>
</div>
<div id="outline-container-testes-baseados-em-propriedades-2" class="outline-3">
<h3 id="testes-baseados-em-propriedades-2"><span class="section-number-3">1.3.</span> Testes baseados em propriedades</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Escrever propriedades é difícil, mas pode ser muito útil para testes<br />
</p>

<ul class="org-ul">
<li>Dado um trajeto T de pouso da nave simulado a partir da altura h (saída do programa), e a lista H de alturas das montanhas, T[i] &gt; H[i] para todo i &lt; N<br /></li>
<li>Dado uma altura mínima h (saída do programa), não deve existir altura menor que h tal que a propriedade acima seja verdadeira.<br /></li>
</ul>

<p>
Frameworks de property-based testing (PBT) vão gerar inputs aleatórios* para o programa e, para cada um deles, ver se a propriedade é satisfeita.<br />
*não necessariamente aleatórios. Muitos frameworks vão tentar valores extremos (zero e <code>MAX_INT</code> para inteiros, etc).<br />
</p>

<p>
Pra quem já fez TEC:<br />
</p>
<ul class="org-ul">
<li>Semelhante a decisão vs verificação<br /></li>
</ul>

<p>
E sobre performance?<br />
</p>
<ul class="org-ul">
<li>No cenário da maratona, os times estariam rodando esses testes na própria máquina.<br /></li>
<li>O programa em si que é submetido não inclui esses testes<br /></li>
<li>Dependendo da confiança nos testes, permite otimizações mais agressivas no código base<br /></li>
</ul>

<p>
Para esse cenário da maratona, testes baseados em propriedades seriam a melhor abordagem na minha avaliação.<br />
</p>

<blockquote>
<p>
Program testing can be used to show the presence of bugs, but never to show their absence!<br />
  &#x2013; Edsger Dijkstra<br />
</p>
</blockquote>
</div>
</div>
<div id="outline-container-testes-baseados-em-modelos-2" class="outline-3">
<h3 id="testes-baseados-em-modelos-2"><span class="section-number-3">1.4.</span> Testes baseados em modelos</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Verificação garante que não existem bugs!<br />
</p>

<p>
Mas e se, na hora de implementar o sistema especificado, eu cometer um erro?<br />
</p>

<p>
Model-Based Testing (MBT) é uma forma de testar se a implementação está de acordo com a especificação.<br />
</p>

<p>
No contexto do problema da maratona, um exemplo:<br />
</p>
<ol class="org-ol">
<li>Especificamos a solução em Quint/TLA+<br /></li>
<li>Verificamos as duas propriedades listadas - Atenção: aqui temos <b>verificação</b>, então não pode existir nenhum caso de teste danado da equipe de prova que vai nos pegar desprevindos!<br />
<ul class="org-ul">
<li>Aqui, sabemos que nossa solução está correta. A menos, está de acordo com as propriedades.<br /></li>
</ul></li>
<li>Escrevemos o código C++ equivalente<br /></li>
</ol>

<p>
Até aqui, já estamos bem fundamentados. A chance de cometermos um erro ao escrever 100 linhas de C++ é baixa. Em sistemas mais realistas, a chance de cometer um erro na implementação é bem maior.<br />
</p>

<p>
Se quisermos reduzir a chance de erro de implementação, podemos usar MBT:<br />
</p>
<ol class="org-ol">
<li>Escrevemos um adaptador que recebe uma execução (trace) e executa ela no código<br />
<ul class="org-ul">
<li>Pra esse exemplo, temos um único input, então a execução seria somente entrada -&gt; saída. Em outros problemas como no E: El Café, temos múltiplas &ldquo;consultas&rdquo; em diferentes estados do sistema (com mais ou menos quantidades de ingredientes).<br /></li>
</ul></li>
<li>Usamos o simulador ou model checker para produzir várias execuções a serem dadas para esse adaptador.<br />
<ul class="org-ul">
<li>Aqui entra a parte mais legal: podemos escolher execuções interessantes usando invariantes.<br />
<ul class="org-ul">
<li>Exemplo: Simulador, me dá uma execução aí onde a última montanha é a mais alta de todas<br /></li>
<li>Quantas vezes na maratona vocês já construíram inputs na mão a fim de provocar uma certa situação?<br /></li>
</ul></li>
</ul></li>
</ol>
</div>
</div>
<div id="outline-container-extra-o-de-c-digo-2" class="outline-3">
<h3 id="extra-o-de-c-digo-2"><span class="section-number-3">1.5.</span> Extração de código</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Alguns métodos formais, como Coq, permitem extração automática da implementação a partir da especificação.<br />
</p>
<ul class="org-ul">
<li>No meu TCC, eu implementei um gerador de código Elixir a partir de TLA+.<br />
<ul class="org-ul">
<li>Mas ele tá longe de ter a mesma confiança que o do Coq.<br /></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-trabalho-2-2" class="outline-3">
<h3 id="trabalho-2-2"><span class="section-number-3">1.6.</span> Trabalho 2</h3>
<div class="outline-text-3" id="text-1-6">
<p>
Nosso trabalho 2 será sobre testes baseados em modelos!<br />
</p>
<ul class="org-ul">
<li>É o maior ponto de contato entre métodos formais e indústria.<br /></li>
<li>Eu vou fazer boa parte do trabalho, vocês só vão precisar encaixar as pecinhas e ver funcionando.<br /></li>
</ul>
</div>
</div>
</div>

            </div>
        </div>
    </body>
</html>
