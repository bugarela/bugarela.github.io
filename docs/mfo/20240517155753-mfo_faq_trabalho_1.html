<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Personal homepage exported with org-thtml">

  <title>FAQ Trabalho 1</title>
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

  <meta property="og:url" content="https://bugarela.com/mfo/20240517155753-mfo_faq_trabalho_1.html" />
  <meta property="og:title" content="FAQ Trabalho 1" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="Personal homepage exported with org-thtml" />
  
  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@bugarela">
    <meta name="twitter:title" content="FAQ Trabalho 1">
    <meta name="twitter:description" content="Personal homepage exported with org-thtml">
  

<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lunr-languages@1.14.0/min/lunr.stemmer.support.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lunr-languages@1.14.0/min/lunr.pt.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.1/pure-min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.1/grids-responsive-min.css">
<link rel="stylesheet" href="../css/layouts/style.css">

    </head>
    <body>
        <div id="layout" class="pure-g">
            <div class="sidebar pure-u-1 pure-u-md-1-5" style="text-align: center">
    <div class="header">
        <h2 class="brand-title">
            <a href="../"><i class="fas fa-home"></i> Gabriela Moreira</a>
        </h2>
    </div>
    <div class="centered">
        <h1 class="huge"><i class="fas fa-folder-open"></i></h1>
        <h1 class="huge"><a href="./">MFO</a></h1>
        <h2 class="brand-title">Métodos Formais</h2>
        <h2 class="brand-tagline">Materiais da disciplina</h2>
    </div>
    <div class="footer">
    <div>
        Created using Emacs and
        <a href="https://github.com/juanjosegarciaripoll/org-thtml">org-mode</a
        >.<br />
        Style from
        <a href="https://owickstrom.github.io/the-monospace-web/"
            >The Monospace Web</a
        >.
    </div>
</div>

</div>

            <div class="content pure-u-1 pure-u-md-2-3">
                
                <h1>FAQ Trabalho 1</h1>
                 <div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#quint-1">1. Quint</a>
<ul>
<li><a href="#erro-no-set-1-to-20-2">1.1. Erro no Set(1.to(20))</a></li>
<li><a href="#erros-do-tipo-name-not-found-sendo-que-o-nome-est-definido-logo-acima-2">1.2. Erros do tipo &ldquo;Name _ not found&rdquo; sendo que o nome está definido logo acima</a></li>
</ul>
</li>
<li><a href="#tla-1">2. TLA+</a></li>
<li><a href="#geral-1">3. Geral</a>
<ul>
<li><a href="#erro-ao-remover-o-blind-ap-s-o-ataque-nesse-semestre-se-aplica-ao-ataque-especial-do-necromante-2">3.1. Erro ao remover o blind após o ataque (nesse semestre, se aplica ao ataque especial do necromante)</a></li>
<li><a href="#como-fazer-pra-rodar-um-dado-por-criatura-2">3.2. Como fazer pra rodar um dado por criatura?</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-quint-1" class="outline-2">
<h2 id="quint-1"><span class="section-number-2">1.</span> Quint</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-erro-no-set-1-to-20-2" class="outline-3">
<h3 id="erro-no-set-1-to-20-2"><span class="section-number-3">1.1.</span> Erro no Set(1.to(20))</h3>
<div class="outline-text-3" id="text-1-1">
<p>
O próprio operador <code>to</code> já constrói um conjunto, assim você está fazendo um conjunto de conjuntos. O certo é <code>1.to(20)</code>.<br />
</p>
</div>
</div>
<div id="outline-container-erros-do-tipo-name-not-found-sendo-que-o-nome-est-definido-logo-acima-2" class="outline-3">
<h3 id="erros-do-tipo-name-not-found-sendo-que-o-nome-est-definido-logo-acima-2"><span class="section-number-3">1.2.</span> Erros do tipo &ldquo;Name _ not found&rdquo; sendo que o nome está definido logo acima</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Cuidado com o escopo dos nomes. A vírgula (,) separa escopos no Quint. Veja o exemplo:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span class="org-builtin">action</span> Foo == <span class="org-keyword">all</span> {
  <span class="org-builtin">val</span> a = 1,
  <span class="org-builtin">val</span> b = a, <span class="org-comment-delimiter">// </span><span class="org-comment">Erro aqui, "a" n&#227;o est&#225; no escopo e n&#227;o ser&#225; encontrado</span>
  variavel' = a + b <span class="org-comment-delimiter">// </span><span class="org-comment">Erro: nem "a" nem "b" ser&#227;o encontrados</span>
}
</pre>
</div>

<p>
Para corrigir, basta remover as vírgulas:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span class="org-builtin">action</span> Foo == <span class="org-keyword">all</span> {
  <span class="org-builtin">val</span> a = 1
  <span class="org-builtin">val</span> b = a
  variavel' = a + b
}
</pre>
</div>

<p>
Vamos ver um caso com mais de uma atualização de variável:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span class="org-builtin">action</span> Foo == <span class="org-keyword">all</span> {
  <span class="org-builtin">val</span> a = 1
  <span class="org-builtin">val</span> b = 2
  variavel' = a + b,
  <span class="org-builtin">val</span> c = 3
  outra' = c,
}
</pre>
</div>

<p>
A divisão de escopo fica assim:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span class="org-builtin">action</span> Foo == <span class="org-keyword">all</span> {
  <span class="org-comment-delimiter">// </span><span class="org-comment">--- escopo 1 ----------</span>
  <span class="org-builtin">val</span> a = 1
  <span class="org-builtin">val</span> b = 2
  variavel' = a + b,
  <span class="org-comment-delimiter">// </span><span class="org-comment">--- fim escopo 1 ------</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">--- escopo 2 ----------</span>
  <span class="org-builtin">val</span> c = 3
  outra' = c,
  <span class="org-comment-delimiter">// </span><span class="org-comment">--- fim escopo 2 ------</span>
}
</pre>
</div>

<p>
Se precisarmos de <code>a</code>, <code>b</code> e <code>c</code> pra ambas atualizações, basta usar um <code>all</code> dentro do escopo delas:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint"><span class="org-builtin">action</span> Foo == {
  <span class="org-builtin">val</span> a = 1
  <span class="org-builtin">val</span> b = 2
  <span class="org-builtin">val</span> c = 3
  <span class="org-keyword">all</span> {
    variavel' = a + b + c,
    outra' = a * b * c,
  }
}
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-tla-1" class="outline-2">
<h2 id="tla-1"><span class="section-number-2">2.</span> TLA+</h2>
<div class="outline-text-2" id="text-2">
<p>
Não recebi nenhuma dúvida de TLA+ ainda.<br />
</p>
</div>
</div>
<div id="outline-container-geral-1" class="outline-2">
<h2 id="geral-1"><span class="section-number-2">3.</span> Geral</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-erro-ao-remover-o-blind-ap-s-o-ataque-nesse-semestre-se-aplica-ao-ataque-especial-do-necromante-2" class="outline-3">
<h3 id="erro-ao-remover-o-blind-ap-s-o-ataque-nesse-semestre-se-aplica-ao-ataque-especial-do-necromante-2"><span class="section-number-3">3.1.</span> Erro ao remover o blind após o ataque (nesse semestre, se aplica ao ataque especial do necromante)</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Lembre-se que não é possível atualizar a mesma variável mais de uma vez na mesma ação/transição. É necessário que as duas modificações (aplicação do dano de ataque e remoção do blind) sejam feitos na mesma atualização da variável de estado. É possível encadear os <code>setBy</code> (Quint) ou <code>EXCEPT</code> (TLA+) para isso:<br />
Quint:<br />
</p>
<div class="org-src-container">
<pre class="src src-quint">creatures.setBy(&lt;dar dano no alvo&gt;).setBy(&lt;remover blind do atacante&gt;)
</pre>
</div>

<p>
TLA+:<br />
</p>
<div class="org-src-container">
<pre class="src src-tla">[creatures <span class="org-keyword">EXCEPT</span> ![alvo] = dano(@), ![atacante] = remocao(@)]
</pre>
</div>

<p>
De forma mais geral, precisamos <a href="https://bugarela.com/mfo/20240424144115-mfo_dicas_trabalho_1.html#composi-o-2">compor</a> as duas atualizações, salvando o resultado da primeira em algum valor temporário e usando esse valor como base para computar o resultado da segunda, que então pode ser salvo na variável de estado (<code>creatures</code>, no exemplo acima).<br />
</p>
</div>
</div>
<div id="outline-container-como-fazer-pra-rodar-um-dado-por-criatura-2" class="outline-3">
<h3 id="como-fazer-pra-rodar-um-dado-por-criatura-2"><span class="section-number-3">3.2.</span> Como fazer pra rodar um dado por criatura?</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Não é possível, nesse caso, escrever algo do tipo &ldquo;para cada criatura, rode um dado&rdquo;.<br />
</p>
<ul class="org-ul">
<li>O Apalache tem uma extensão para TLA+ que possibilitaria isso (<a href="https://apalache-mc.org/docs/lang/apalache-operators.html?highlight=generator#value-generators">Gen</a>)<br />
<ul class="org-ul">
<li>Não conheço nada semelhante no TLC.<br /></li>
<li>Ainda não temos um equivalente no Quint, mas isso está em discussão e deve ser implementado logo.<br /></li>
</ul></li>
</ul>
<p>
Para o trabalho, podem fazer da forma repetitiva e declarar um valor para cada dado de cada criatura.<br />
</p>
</div>
</div>
</div>

            </div>
        </div>
    </body>
</html>
